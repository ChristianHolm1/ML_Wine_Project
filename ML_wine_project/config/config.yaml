# ========= Data (CSV) =========
data_manager:
  # === TRAINING ===
  csv_path: "data/raw_data/winequality-white.csv"

  # === INFERENCE ===
  prod_database_path: "data/prod_data/database_prod.csv"              # auto-created

# ========= Pipeline Runner =========
pipeline_runner:
  # === TRAINING ===
  model_path: "models/final_gbr.pkl"

#  # === INFERENCE ===
  batch_size: 24                          # last N rows to build features (>= 7 for roll3/6; 168 is safe)
  num_inference_steps: 1                 # matches stream length for batch script


# ========= Inference output formatting =========
inference:
  output_integer: true
  integer_strategy: "round"
  min_value: 0

# ========= Preprocessing =========
preprocessing:
  column_mapping: {}
  drop_columns:
    - citric_acid
    - ph
    - sulphates


# ========= Training =========
training:
  target:
    source_col: quality
    horizon: 0
    target_name: target
  train_fraction: 0.8
  model_type: XGBClassifier
  model_params:
    n_estimators: 500
    learning_rate: 0.03
    max_depth: 6
    min_child_weight: 1.0
    subsample: 0.9
    colsample_bytree: 0.8
    colsample_bylevel: 1.0
    gamma: 0.0
    reg_alpha: 0.01
    reg_lambda: 1.0
    objective: 'multi:softprob'
    eval_metric: 'mlogloss'
    random_state: 42
    verbosity: 1

  grid_search:
    enabled: false



# ========= Reports =========
reports:
  metrics_path: "reports/train_metrics.json"
