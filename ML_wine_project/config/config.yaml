# ========= Data (CSV) =========
data_manager:
  # === TRAINING ===
  csv_path: "data/raw_data/winequality-white.csv"

  # === INFERENCE ===
  prod_database_path: "data/prod_data/database_prod.csv"              # auto-created

# ========= Pipeline Runner =========
pipeline_runner:
  # === TRAINING ===
  model_path: "models/final_gbr.pkl"

#  # === INFERENCE ===
  batch_size: 24                          # last N rows to build features (>= 7 for roll3/6; 168 is safe)
  num_inference_steps: 1                 # matches stream length for batch script


# ========= Inference output formatting =========
inference:
  output_integer: true
  integer_strategy: "round"   # "round" | "floor" | "ceil"
  min_value: 0                # clamp negative predictions to 0+

# ========= Preprocessing =========
preprocessing:
  column_mapping: {}
  drop_columns:
    - citric_acid


# ========= Training =========
training:
  target:
    source_col: quality
    horizon: 0
    target_name: target
  train_fraction: 0.8
  model_type: CatBoostClassifier
  model_params:
    n_estimators: 8192
    learning_rate: 0.05515909376064567
    early_stopping_rounds: 10
  grid_search:
    enabled: false

# ========= Reports =========
reports:
  metrics_path: "reports/train_metrics.json"
